<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Help Koen</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
<header>
    <h1>Help Koen</h1>
    <p>Steun de behandeling van Koen ‚Äì elke bijdrage telt.</p>
    <div id="donate-button"></div>
</header>

<main>
    <section id="doel">
        <h2>Het Doel</h2>
        <p>Koen heeft een gespecialiseerde behandeling nodig die niet volledig gedekt wordt. Ons doel is om de financi√´le druk te verlichten zodat hij zich kan focussen op herstel.</p>
        <p>We communiceren transparant over ingezamelde acties en donaties.</p>
    </section>

    <section id="onze-acties">
        <h2>Onze Acties</h2>
        <p class="intro-text">We organiseren verschillende acties om Koen te steunen. Klik op een actie voor meer details.</p>
        
        <div class="eigen-acties-grid">
            <div class="eigen-actie-card" onclick="toggleDetails(this)" data-datum="2026-01-23">
                <div class="actie-header">
                    <h3>üßÄ Kaas- & Wijnavond</h3>
                    <span class="datum-badge">Vr 24 januari 2026</span>
                </div>
                <p class="locatie">üìç Parochiezaal Sint-Pieter</p>
                <div class="actie-details" style="display:none;">
                    <p><strong>Tijd:</strong> 19:00 - 23:00</p>
                    <p><strong>Prijs:</strong> ‚Ç¨25 per persoon (all-in degustatie)</p>
                    <p><strong>Programma:</strong> Selectie van 8 kazen met bijpassende wijnen, uitleg door sommelier</p>
                    <p><strong>Reserveren verplicht:</strong> <a href="mailto:kaas@helpkoen.be">kaas@helpkoen.be</a> - Beperkt aantal plaatsen!</p>
                </div>
                <span class="meer-info">‚ñº Klik voor meer info</span>
            </div>
            <div class="eigen-actie-card" onclick="toggleDetails(this)" data-datum="2026-01-23">
                <div class="actie-header">
                    <h3>üéâ Benefietfuif</h3>
                    <span class="datum-badge">Za 25 januari 2026</span>
                </div>
                <p class="locatie">üìç Sporthal De Kouter</p>
                <div class="actie-details" style="display:none;">
                    <p><strong>Tijd:</strong> 20:00 - 02:00</p>
                    <p><strong>Toegang:</strong> ‚Ç¨10 per persoon (incl. eerste drankje)</p>
                    <p><strong>Programma:</strong> DJ Marc draait de beste hits, loterij met waardevolle prijzen</p>
                    <p><strong>Info & tickets:</strong> <a href="mailto:fuif@helpkoen.be">fuif@helpkoen.be</a> of 0456 78 90 12</p>
                </div>
                <span class="meer-info">‚ñº Klik voor meer info</span>
            </div>

            <div class="eigen-actie-card" onclick="toggleDetails(this)" data-datum="2026-01-25">
                <div class="actie-header">
                    <h3>üçù Spaghetti Dag</h3>
                    <span class="datum-badge">Zo 26 januari 2026</span>
                </div>
                <p class="locatie">üìç Gemeenteplein (overdekt bij regen)</p>
                <div class="actie-details" style="display:none;">
                    <p><strong>Tijd:</strong> 11:30 - 18:00 (doorlopend)</p>
                    <p><strong>Prijs:</strong> ‚Ç¨12 volwassenen, ‚Ç¨7 kinderen (-12j)</p>
                    <p><strong>Menu:</strong> Spaghetti bolognese (vega optie beschikbaar), salade, dessert, koffie</p>
                    <p><strong>Extra:</strong> Springkasteel voor de kinderen, live muziek vanaf 14u</p>
                    <p><strong>Afhaal mogelijk:</strong> Bestel op 0498 12 34 56</p>
                </div>
                <span class="meer-info">‚ñº Klik voor meer info</span>
            </div>
        </div>
    </section>

    <section id="overzicht">
        <h2>Overzicht &amp; Kalender</h2>
        
        <div class="calendar-container">
            <div class="calendar-header">
                <button onclick="previousMonth()" class="calendar-nav">‚óÄ</button>
                <h3 id="calendar-month-year">Januari 2026</h3>
                <button onclick="nextMonth()" class="calendar-nav">‚ñ∂</button>
            </div>
            <div class="calendar-grid" id="calendar-grid">
                <!-- Wordt gevuld door JavaScript -->
            </div>
            <div class="calendar-legend">
                <span><span class="legend-dot onze-actie"></span> Onze acties</span>
                <span><span class="legend-dot externe-actie"></span> Externe acties</span>
            </div>
        </div>
        
        <h3 class="lijst-titel">Alle Acties (Chronologisch)</h3>
        <div id="acties-container">
            <p>Nog geen geregistreerde externe acties.</p>
        </div>
    </section>
    
    <section id="transparantie">
        <h2>Transparantie</h2>
        <p>Totaal ingezameld (externe donatie via GoFundMe): <span id="totaal-bedrag">‚Äî</span></p>
        <p>Bezoek onze donatiepagina voor actuele stand.</p>
    </section>

    <section id="registreer">
        <h2>Registreer Jouw Actie</h2>
        <p>Organiseer je een wafelenbak, quiz, wandeling of iets anders? Klik hieronder om het formulier te openen.</p>
        
        <div class="form-toggle-card" onclick="toggleForm()">
            <div class="form-toggle-header">
                <h3>üìù Registratieformulier</h3>
                <span class="form-status" id="form-status">‚ñº Klik om formulier te openen</span>
            </div>
            <p class="form-intro">Vul je actie-details in: naam, datum, locatie, beschrijving en contactgegevens</p>
        </div>
        
        <div class="form-embed" id="form-container" style="display:none;">
            <iframe src="https://docs.google.com/forms/d/e/1FAIpQLScVOt9dH2I4CIlIb3oQPn3Gvpmtv_X5kJzBUL6b5khhyFHUTA/viewform?embedded=true" width="100%" height="1106" frameborder="0" marginheight="0" marginwidth="0">Laden‚Ä¶</iframe>
        </div>
    </section>
    
</main>

<footer>
    <p>&copy; 2025 Help Koen</p>
</footer>

<script src="scripts/donate.js"></script>
<script src="scripts/actions-remote.js"></script>
<script>
    // Componenten laden
    fetch('components/donate-button.html')
        .then(r => r.text())
        .then(html => document.getElementById('donate-button').innerHTML = html);
    
    // Toggle details voor eigen acties
    function toggleDetails(card) {
        const details = card.querySelector('.actie-details');
        const meerInfo = card.querySelector('.meer-info');
        const isOpen = details.style.display !== 'none';
        
        if (isOpen) {
            details.style.display = 'none';
            meerInfo.textContent = '‚ñº Klik voor meer info';
            card.classList.remove('expanded');
        } else {
            details.style.display = 'block';
            meerInfo.textContent = '‚ñ≤ Verberg details';
            card.classList.add('expanded');
        }
    }
    
    // Toggle formulier
    function toggleForm() {
        const formContainer = document.getElementById('form-container');
        const formStatus = document.getElementById('form-status');
        const isOpen = formContainer.style.display !== 'none';
        
        if (isOpen) {
            formContainer.style.display = 'none';
            formStatus.textContent = '‚ñº Klik om formulier te openen';
        } else {
            formContainer.style.display = 'block';
            formStatus.textContent = '‚ñ≤ Verberg formulier';
            // Scroll naar formulier
            setTimeout(() => formContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' }), 100);
        }
    }
    
    // Kalender functionaliteit
    let currentMonth = 0; // 0 = januari 2026
    let currentYear = 2026;
    
    const EIGEN_ACTIES = [
        { datum: '2026-01-23', titel: 'Benefietfuif', type: 'eigen' },
        { datum: '2026-01-23', titel: 'Kaas- & Wijnavond', type: 'eigen' },
        { datum: '2026-01-25', titel: 'Spaghetti Dag', type: 'eigen' }
    ];
    
    function renderCalendar() {
        const grid = document.getElementById('calendar-grid');
        const monthYear = document.getElementById('calendar-month-year');
        
        const firstDay = new Date(currentYear, currentMonth, 1);
        const lastDay = new Date(currentYear, currentMonth + 1, 0);
        const daysInMonth = lastDay.getDate();
        const startDayOfWeek = firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1; // Maandag = 0
        
        const monthNames = ['Januari', 'Februari', 'Maart', 'April', 'Mei', 'Juni', 
                           'Juli', 'Augustus', 'September', 'Oktober', 'November', 'December'];
        monthYear.textContent = `${monthNames[currentMonth]} ${currentYear}`;
        
        // Verzamel externe acties van actions-remote
        const externeActies = window.alleExterneActies || [];
        
        // Header dagen
        let html = '<div class="calendar-day-header">Ma</div><div class="calendar-day-header">Di</div>' +
                   '<div class="calendar-day-header">Wo</div><div class="calendar-day-header">Do</div>' +
                   '<div class="calendar-day-header">Vr</div><div class="calendar-day-header">Za</div>' +
                   '<div class="calendar-day-header">Zo</div>';
        
        // Lege cellen voor dagen voor de 1e
        for (let i = 0; i < startDayOfWeek; i++) {
            html += '<div class="calendar-day empty"></div>';
        }
        
        // Dagen van de maand
        for (let day = 1; day <= daysInMonth; day++) {
            const dateStr = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            const eigenActie = EIGEN_ACTIES.some(a => a.datum === dateStr);
            const externeActie = externeActies.some(a => a.datum === dateStr);
            
            let classes = 'calendar-day';
            let indicators = '';
            
            if (eigenActie) {
                classes += ' has-event';
                indicators += '<span class="event-indicator onze-actie"></span>';
            }
            if (externeActie) {
                classes += ' has-event';
                indicators += '<span class="event-indicator externe-actie"></span>';
            }
            
            html += `<div class="${classes}"><span class="day-number">${day}</span>${indicators}</div>`;
        }
        
        grid.innerHTML = html;
    }
    
    function previousMonth() {
        currentMonth--;
        if (currentMonth < 0) {
            currentMonth = 11;
            currentYear--;
        }
        renderCalendar();
    }
    
    function nextMonth() {
        currentMonth++;
        if (currentMonth > 11) {
            currentMonth = 0;
            currentYear++;
        }
        renderCalendar();
    }
    
    // Initialiseer kalender
    document.addEventListener('DOMContentLoaded', () => {
        renderCalendar();
    });
</script>
</body>
</html>